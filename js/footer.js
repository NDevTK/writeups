'use strict';
const themes = document.getElementById('themes');
const info = document.getElementById('info');

themes.value = theme;

const writeupsContext = {
  sharedContext:
    'This is an webapp infomation security bug writeup intended for a tech-savvy audience.',
  format: 'plain-text',
  length: 'long',
  expectedInputLanguages: ['en'],
  outputLanguage: 'en',
  expectedContextLanguages: ['en']
};

function getRandomIntInclusive(min, max) {
  const randomBuffer = new Uint32Array(1);

  window.crypto.getRandomValues(randomBuffer);

  let randomNumber = randomBuffer[0] / (0xffffffff + 1);

  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(randomNumber * (max - min + 1)) + min;
}

function getRandom(max) {
  return getRandomIntInclusive(0, max - 1);
}

function notSupported(reason) {
  alert('The ' + themes.value + ' theme cant be used with ' + reason + '.');
  themes.value = theme;
  return false;
}

themes.onchange = async () => {
  if (themes.value === 'random') {
    const allowedThemes = [...themes.options].filter((e) => {
      // Filter out the currently active theme and ourself.
      return e.value != themes.value && e.value != theme;
    });
    // Select a random dropdown option.
    themes.value = allowedThemes[getRandom(allowedThemes.length)].value;
  }

  switch (themes.value) {
    case 'default.css':
      localStorage.removeItem('theme');
      reloadAll();
      return;
    case 'mc.css':
      // https://www.minecraft.net/en-us/usage-guidelines
      alert(
        'NOT AN OFFICIAL MINECRAFT PRODUCT. NOT APPROVED BY OR ASSOCIATED WITH MOJANG OR MICROSOFT.'
      );
      break;
    case 'noscript.css':
      notSupported('javascript enabled');
      break;
    case 'spoof':
      if (isMobile) {
        notSupported('a mobile device');
      } else {
        let w = window.open(
          'https://accounts.google.com/writeups',
          '',
          'width=1000000000,height=1'
        );
        w.resizeBy(0, -100000);
        setInterval((_) => w.focus(), 5);
      }
      break;
    case 'ai':
      AIWarning();
      location.href = 'https://www.youtube.com/watch?v=2jhVRk1H7vw';
      break;
    case 'summarizer.css':
      const supported = await summarizerSupport();
      if (!supported) break;
      AIWarning();
      break;
  }
  // Consent!
  if (
    themes.value.endsWith('.css') &&
    themes.value !== theme &&
    confirm(
      'Allow the ' +
        themes.value +
        ' theme preference to be saved to localStorage?'
    )
  ) {
    localStorage.setItem('theme', themes.value);

    if (themes.value == 'summarizer.css') {
      document.body.innerText = 'Please wait loading AI model...';
      await Summarizer.create(writeupsContext);
    }

    reloadAll();
  } else {
    // Revert UI
    themes.value = theme;
  }
};

function AtPos(str, position, newStr) {
  return str.slice(0, position) + newStr + str.slice(position);
}

function TypoSTR(str) {
  if (str.length === 0) return;
  let words = str.split(' ');
  words.forEach((word, index) => {
    if (word.length === 0) return;
    // For security links and email addresses wont get a typo
    if (word.includes('://') || word.includes('@')) return;
    if (getRandom(2)) words[index] = Typo(word);
  });
  return words.join(' ');
}

function Typo(word) {
  let index = getRandom(word.length);
  let letter = word[index];
  // If chosen is a number then ignore
  if (!isNaN(letter)) return word;
  let newString = AtPos(word, index, letter);
  if (getRandom(2)) newString = AtPos(newString, index, letter);
  return newString;
}

function reloadAll() {
  reload.postMessage('');
  location.reload();
}

switch (theme) {
  case 'duck.css':
    const link = document.querySelector("link[rel~='icon']");
    if (!link) {
      link = document.createElement('link');
      link.rel = 'icon';
      document.head.appendChild(link);
    }
    link.href = '/writeups/duck.svg';
    break;
  case 'typoifier.css':
    document.querySelectorAll('p, a').forEach((e) => {
      e.childNodes.forEach((node) => {
        if (node.data === '' || node.data === undefined) return;
        node.data = TypoSTR(node.data);
      });
    });
    break;
  case 'audio.css':
    const utterance = new SpeechSynthesisUtterance(document.body.innerText);
    const voices = speechSynthesis.getVoices();
    utterance.voice = voices[0];
    window.addEventListener('pagehide', () => {
      speechSynthesis.cancel();
    });
    utterance.onend = () => {
      speechSynthesis.speak(utterance);
    };
    speechSynthesis.speak(utterance);
    break;
  case 'base64.css':
    document.body.querySelectorAll('p, a').forEach((e) => {
      e.innerText = btoa(
        String.fromCharCode(...new TextEncoder('utf-8').encode(e.innerText))
      );
    });
    break;
  case 'emoji.css':
    // Encode base64 into emoji
    const encoding = base2base(
      '0123456789+/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz=',
      'ðŸ˜€ ðŸ˜ƒ ðŸ˜„ ðŸ˜ ðŸ˜† ðŸ˜… ðŸ¤£ ðŸ˜‚ ðŸ¥¹ ðŸ™‚ ðŸ™ƒ ðŸ˜‰ ðŸ˜Š ðŸ˜‡ ðŸ¥° ðŸ˜ ðŸ¤© ðŸ˜˜ ðŸ˜— â˜ºï¸ ðŸ˜š ðŸ˜™ ðŸ¥² ðŸ˜‹ ðŸ˜› ðŸ˜œ ðŸ¤ª ðŸ˜ ðŸ¤‘ ðŸ¤— ðŸ«¢ ðŸ¤­ ðŸ¤« ðŸ¤” ðŸ™‚â€â†”ï¸ ðŸ™‚â€â†•ï¸ ðŸ«¡ ðŸ¤ ðŸ¤¨ ðŸ˜ï¸ ðŸ˜‘ ðŸ˜¶ ðŸ˜ ðŸ˜’ ðŸ™„ ðŸ˜¬ ðŸ¤¥ ðŸ˜Œ ðŸ˜” ðŸ˜ª ðŸ˜®â€ðŸ’¨ ðŸ¤¤ ðŸ˜´ ðŸ˜· ðŸ¤’ ðŸ¤• ðŸ¤¢ ðŸ¤® ðŸ¤§ ðŸ«  ðŸ¥µ ðŸ¥¶ ðŸ˜¶â€ðŸŒ«ï¸ ðŸ«¥ ðŸ¥´ ðŸ«¨ ðŸ˜µâ€ðŸ’« ðŸ˜µ ðŸ¤¯ ðŸ¤  ðŸ¥³ ðŸ¥¸ ðŸ˜Ž ðŸ¤“ ðŸ§ ðŸ«¤ ðŸ˜• ðŸ˜Ÿ ðŸ™ â˜¹ï¸ ðŸ˜® ðŸ˜¯ ðŸ˜² ðŸ˜³ ðŸ«£ ðŸ¥º ðŸ˜¦ ðŸ˜§ ðŸ˜¨ ðŸ˜° ðŸ˜¥ ðŸ˜¢ ðŸ˜­ ðŸ˜± ðŸ˜– ðŸ˜£ ðŸ˜ž ðŸ˜“ ðŸ˜© ðŸ˜« ðŸ¥± ðŸ˜¤ ðŸ˜¡ ðŸ˜  ðŸ¤¬ ðŸ˜ˆ ðŸ‘¿ ðŸ’€ â˜ ï¸ ðŸ’© ðŸ¤¡ ðŸ‘¹ ðŸ‘º ðŸ‘» ðŸ‘½ï¸ ðŸ‘¾ ðŸ¤– ðŸ˜º ðŸ˜¸ ðŸ˜¹ ðŸ˜» ðŸ˜¼ ðŸ˜½ ðŸ™€ ðŸ˜¿ ðŸ˜¾ ðŸ™ˆ ðŸ™‰ ðŸ™Š ðŸ‘‹ ðŸ¤š ðŸ–ï¸ âœ‹ ðŸ–– ðŸ‘Œ ðŸ¤Œ ðŸ¤ âœŒï¸ ðŸ¤ž ðŸ«° ðŸ¤Ÿ ðŸ¤˜ ðŸ¤™ ðŸ‘ˆï¸ ðŸ‘‰ï¸ ðŸ‘†ï¸ ðŸ–• ðŸ‘‡ï¸ â˜ï¸ ðŸ«µ ðŸ‘ï¸ ðŸ‘Žï¸ âœŠ ðŸ‘Š ðŸ¤› ðŸ¤œ ðŸ‘ ðŸ™Œ ðŸ‘ ðŸ«¶ ðŸ¤² ðŸ«³ ðŸ«´ ðŸ«± ðŸ«² ðŸ¤ ðŸ«¸ ðŸ«· ðŸ™ âœï¸ ðŸ’… ðŸ¤³ ðŸ’ª ðŸ¦¾ ðŸ¦¿ ðŸ¦µ ðŸ¦¶ ðŸ‘‚ï¸ ðŸ¦» ðŸ‘ƒ ðŸ§  ðŸ«€ ðŸ« ðŸ¦· ðŸ¦´ ðŸ‘€ ðŸ‘ï¸ ðŸ‘… ðŸ‘„ ðŸ«¦ ðŸ’‹ ðŸ‘¶ ðŸ§’ ðŸ‘¦ ðŸ‘§ ðŸ§‘ ðŸ‘¨ ðŸ‘© ðŸ§” ðŸ§”â€â™€ï¸ ðŸ§”â€â™‚ï¸ ðŸ§‘â€ðŸ¦° ðŸ‘¨â€ðŸ¦° ðŸ‘©â€ðŸ¦° ðŸ§‘â€ðŸ¦± ðŸ‘¨â€ðŸ¦± ðŸ‘©â€ðŸ¦± ðŸ§‘â€ðŸ¦³ ðŸ‘¨â€ðŸ¦³ ðŸ‘©â€ðŸ¦³ ðŸ§‘â€ðŸ¦² ðŸ‘¨â€ðŸ¦² ðŸ‘©â€ðŸ¦² ðŸ‘± ðŸ‘±â€â™‚ï¸ ðŸ‘±â€â™€ï¸ ðŸ§“ ðŸ‘´ ðŸ‘µ ðŸ™ ðŸ™â€â™‚ï¸ ðŸ™â€â™€ï¸ ðŸ™Ž ðŸ™Žâ€â™‚ï¸ ðŸ™Žâ€â™€ï¸ ðŸ™… ðŸ™…â€â™‚ï¸ ðŸ™…â€â™€ï¸ ðŸ™† ðŸ™†â€â™‚ï¸ ðŸ™†â€â™€ï¸ ðŸ’ ðŸ’â€â™‚ï¸ ðŸ’â€â™€ï¸ ðŸ™‹ ðŸ™‹â€â™‚ï¸ ðŸ™‹â€â™€ï¸ ðŸ§ ðŸ§â€â™‚ï¸ ðŸ§â€â™€ï¸ ðŸ™‡ ðŸ™‡â€â™‚ï¸ ðŸ™‡â€â™€ï¸ ðŸ¤¦ ðŸ¤¦â€â™‚ï¸ ðŸ¤¦â€â™€ï¸ ðŸ¤· ðŸ¤·â€â™‚ï¸ ðŸ¤·â€â™€ï¸ ðŸ§‘â€âš•ï¸ ðŸ‘¨â€âš•ï¸ ðŸ‘©â€âš•ï¸ ðŸ§‘â€ðŸŽ“ ðŸ‘¨â€ðŸŽ“ ðŸ‘©â€ðŸŽ“ ðŸ§‘â€ðŸ« ðŸ‘¨â€ðŸ« ðŸ‘©â€ðŸ« ðŸ§‘â€âš–ï¸ ðŸ‘¨â€âš–ï¸ ðŸ‘©â€âš–ï¸ ðŸ§‘â€ðŸŒ¾ ðŸ‘¨â€ðŸŒ¾ ðŸ‘©â€ðŸŒ¾ ðŸ§‘â€ðŸ³ ðŸ‘¨â€ðŸ³ ðŸ‘©â€ðŸ³ ðŸ§‘â€ðŸ”§ ðŸ‘¨â€ðŸ”§ ðŸ‘©â€ðŸ”§ ðŸ§‘â€ðŸ­ ðŸ‘¨â€ðŸ­ ðŸ‘©â€ðŸ­ ðŸ§‘â€ðŸ’¼ ðŸ‘¨â€ðŸ’¼ ðŸ‘©â€ðŸ’¼ ðŸ§‘â€ðŸ”¬ ðŸ‘¨â€ðŸ”¬ ðŸ‘©â€ðŸ”¬ ðŸ§‘â€ðŸ’» ðŸ‘¨â€ðŸ’» ðŸ‘©â€ðŸ’» ðŸ§‘â€ðŸŽ¤ ðŸ‘¨â€ðŸŽ¤ ðŸ‘©â€ðŸŽ¤ ðŸ§‘â€ðŸŽ¨ ðŸ‘¨â€ðŸŽ¨ ðŸ‘©â€ðŸŽ¨ ðŸ§‘â€âœˆï¸ ðŸ‘¨â€âœˆï¸ ðŸ‘©â€âœˆï¸ ðŸ§‘â€ðŸš€ ðŸ‘¨â€ðŸš€ ðŸ‘©â€ðŸš€ ðŸ§‘â€ðŸš’ ðŸ‘¨â€ðŸš’ ðŸ‘©â€ðŸš’ ðŸ‘® ðŸ‘®â€â™‚ï¸ ðŸ‘®â€â™€ï¸ ðŸ•µï¸ ðŸ•µï¸â€â™‚ï¸ ðŸ•µï¸â€â™€ï¸ ðŸ’‚ ðŸ’‚â€â™‚ï¸ ðŸ’‚â€â™€ï¸ ðŸ¥· ðŸ‘· ðŸ‘·â€â™‚ï¸ ðŸ‘·â€â™€ï¸ ðŸ«… ðŸ¤´ ðŸ‘¸ ðŸ‘³ ðŸ‘³â€â™‚ï¸ ðŸ‘³â€â™€ï¸ ðŸ‘² ðŸ§• ðŸ¤µ ðŸ¤µâ€â™‚ï¸ ðŸ¤µâ€â™€ï¸ ðŸ‘° ðŸ‘°â€â™‚ï¸ ðŸ‘°â€â™€ï¸ ðŸ«„ ðŸ«ƒ ðŸ¤° ðŸ¤± ðŸ‘©â€ðŸ¼ ðŸ‘¨â€ðŸ¼ ðŸ§‘â€ðŸ¼ ðŸ‘¼ ðŸŽ… ðŸ¤¶ ðŸ§‘â€ðŸŽ„ ðŸ¦¸ ðŸ¦¸â€â™‚ï¸ ðŸ¦¸â€â™€ï¸ ðŸ¦¹ ðŸ¦¹â€â™‚ï¸ ðŸ¦¹â€â™€ï¸ ðŸ§™ ðŸ§™â€â™‚ï¸ ðŸ§™â€â™€ï¸ ðŸ§š ðŸ§šâ€â™‚ï¸ ðŸ§šâ€â™€ï¸ ðŸ§› ðŸ§›â€â™‚ï¸ ðŸ§›â€â™€ï¸ ðŸ§œ ðŸ§œâ€â™‚ï¸ ðŸ§œâ€â™€ï¸ ðŸ§ ðŸ§â€â™‚ï¸ ðŸ§â€â™€ï¸ ðŸ§ž ðŸ§žâ€â™‚ï¸ ðŸ§žâ€â™€ï¸ ðŸ§Ÿ ðŸ§Ÿâ€â™‚ï¸ ðŸ§Ÿâ€â™€ï¸ ðŸ§Œ ðŸ’† ðŸ’†â€â™‚ï¸ ðŸ’†â€â™€ï¸ ðŸ’‡ ðŸ’‡â€â™‚ï¸ ðŸ’‡â€â™€ï¸ ðŸš¶ ðŸš¶â€â™‚ï¸ ðŸš¶â€â™€ï¸ ðŸ§ ðŸ§â€â™‚ï¸ ðŸ§â€â™€ï¸ ðŸ§Ž ðŸ§Žâ€â™‚ï¸ ðŸ§Žâ€â™€ï¸ ðŸ§‘â€ðŸ¦¯ ðŸ‘¨â€ðŸ¦¯ ðŸ‘©â€ðŸ¦¯ ðŸ§‘â€ðŸ¦¼ ðŸ‘¨â€ðŸ¦¼ ðŸ‘©â€ðŸ¦¼ ðŸ§‘â€ðŸ¦½ ðŸ‘¨â€ðŸ¦½ ðŸ‘©â€ðŸ¦½ ðŸƒ ðŸƒâ€â™‚ï¸ ðŸƒâ€â™€ï¸ ðŸš¶â€âž¡ï¸ ðŸš¶â€â™€ï¸â€âž¡ï¸ ðŸš¶â€â™‚ï¸â€âž¡ï¸ ðŸ§Žâ€âž¡ï¸ ðŸ§Žâ€â™€ï¸â€âž¡ï¸ ðŸ§Žâ€â™‚ï¸â€âž¡ï¸ ðŸ§‘â€ðŸ¦¯â€âž¡ï¸ ðŸ‘¨â€ðŸ¦¯â€âž¡ï¸ ðŸ‘©â€ðŸ¦¯â€âž¡ï¸ ðŸ§‘â€ðŸ¦¼â€âž¡ï¸ ðŸ‘¨â€ðŸ¦¼â€âž¡ï¸ ðŸ‘©â€ðŸ¦¼â€âž¡ï¸ ðŸ§‘â€ðŸ¦½â€âž¡ï¸ ðŸ‘¨â€ðŸ¦½â€âž¡ï¸ ðŸ‘©â€ðŸ¦½â€âž¡ï¸ ðŸƒâ€âž¡ï¸ ðŸƒâ€â™€ï¸â€âž¡ï¸ ðŸƒâ€â™‚ï¸â€âž¡ï¸ ðŸ’ƒ ðŸ•º ðŸ•´ï¸ ðŸ‘¯ ðŸ‘¯â€â™‚ï¸ ðŸ‘¯â€â™€ï¸ ðŸ§– ðŸ§–â€â™‚ï¸ ðŸ§–â€â™€ï¸ ðŸ§— ðŸ§—â€â™‚ï¸ ðŸ§—â€â™€ï¸ ðŸ¤º ðŸ‡ â›·ï¸ ðŸ‚ï¸ ðŸŒï¸ ðŸŒï¸â€â™‚ï¸ ðŸŒï¸â€â™€ï¸ ðŸ„ï¸ ðŸ„â€â™‚ï¸ ðŸ„â€â™€ï¸ ðŸš£ ðŸš£â€â™‚ï¸ ðŸš£â€â™€ï¸ ðŸŠï¸ ðŸŠâ€â™‚ï¸ ðŸŠâ€â™€ï¸ â›¹ï¸ â›¹ï¸â€â™‚ï¸ â›¹ï¸â€â™€ï¸ ðŸ‹ï¸ ðŸ‹ï¸â€â™‚ï¸ ðŸ‹ï¸â€â™€ï¸ ðŸš´ ðŸš´â€â™‚ï¸ ðŸš´â€â™€ï¸ ðŸšµ ðŸšµâ€â™‚ï¸ ðŸšµâ€â™€ï¸ ðŸ¤¸ ðŸ¤¸â€â™‚ï¸ ðŸ¤¸â€â™€ï¸ ðŸ¤¼ ðŸ¤¼â€â™‚ï¸ ðŸ¤¼â€â™€ï¸ ðŸ¤½ ðŸ¤½â€â™‚ï¸ ðŸ¤½â€â™€ï¸ ðŸ¤¾ ðŸ¤¾â€â™‚ï¸ ðŸ¤¾â€â™€ï¸ ðŸ¤¹ ðŸ¤¹â€â™‚ï¸ ðŸ¤¹â€â™€ï¸ ðŸ§˜ ðŸ§˜â€â™‚ï¸ ðŸ§˜â€â™€ï¸ ðŸ›€ ðŸ›Œ ðŸ§‘â€ðŸ¤â€ðŸ§‘ ðŸ‘­ ðŸ‘« ðŸ‘¬ ðŸ’ ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨ ðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨ ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘© ðŸ’‘ ðŸ‘©â€â¤ï¸â€ðŸ‘¨ ðŸ‘¨â€â¤ï¸â€ðŸ‘¨ ðŸ‘©â€â¤ï¸â€ðŸ‘© ðŸ‘ªï¸ ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘©â€ðŸ‘§ ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§ ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§ ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘§ ðŸ‘©â€ðŸ‘©â€ðŸ‘¦ ðŸ‘©â€ðŸ‘©â€ðŸ‘§ ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦ ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§ ðŸ‘¨â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘§ ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦ ðŸ‘¨â€ðŸ‘§â€ðŸ‘§ ðŸ‘©â€ðŸ‘¦ ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦ ðŸ‘©â€ðŸ‘§ ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ ðŸ‘©â€ðŸ‘§â€ðŸ‘§ ðŸ—£ï¸ ðŸ‘¤ ðŸ‘¥ ðŸ«‚ ðŸ‘£ðŸµ ðŸ’ ðŸ¦ ðŸ¦§ ðŸ¶ ðŸ•ï¸ ðŸ¦® ðŸ•â€ðŸ¦º ðŸ© ðŸº ðŸ¦Š ðŸ¦ ðŸ± ðŸˆï¸ ðŸˆâ€â¬› ðŸ¦ ðŸ¯ ðŸ… ðŸ† ðŸ´ ðŸŽ ðŸ¦„ ðŸ« ðŸ¦“ ðŸ¦Œ ðŸ«Ž ðŸ¦¬ ðŸ® ðŸ‚ ðŸƒ ðŸ„ ðŸ· ðŸ– ðŸ— ðŸ½ ðŸ ðŸ‘ ðŸ ðŸª ðŸ« ðŸ¦™ ðŸ¦’ ðŸ˜ ðŸ¦£ ðŸ¦ ðŸ¦› ðŸ­ ðŸ ðŸ€ ðŸ¹ ðŸ° ðŸ‡ ðŸ¿ï¸ ðŸ¦« ðŸ¦” ðŸ¦‡ ðŸ» ðŸ»â€â„ï¸ ðŸ¨ ðŸ¼ ðŸ¦¥ ðŸ¦¦ ðŸ¦¨ ðŸ¦˜ ðŸ¦¡ ðŸ¾ ðŸ¦ƒ ðŸ” ðŸ“ ðŸ£ ðŸ¤ ðŸ¥ ðŸ¦ï¸ ðŸ§ ðŸ¦â€â¬› ðŸ•Šï¸ ðŸ¦… ðŸ¦† ðŸª¿ ðŸ¦¢ ðŸ¦‰ ðŸ¦¤ ðŸ¦© ðŸ¦š ðŸ¦œ ðŸ¦â€ðŸ”¥ ðŸª½ ðŸª¶ ðŸª¹ ðŸªº ðŸ¥š ðŸ¸ ðŸŠ ðŸ¢ ðŸ¦Ž ðŸ ðŸ² ðŸ‰ ðŸ¦• ðŸ¦– ðŸ³ ðŸ‹ ðŸ¬ ðŸ¦­ ðŸŸï¸ ðŸ  ðŸ¡ ðŸ¦ˆ ðŸª¼ ðŸ™ ðŸ¦‘ ðŸ¦€ ðŸ¦ž ðŸ¦ ðŸª¸ ðŸ¦ª ðŸš ðŸŒ ðŸ¦‹ ðŸ› ðŸœ ðŸ ðŸª² ðŸž ðŸ¦— ðŸª³ ðŸ•·ï¸ ðŸ•¸ï¸ ðŸ¦‚ ðŸ¦Ÿ ðŸª° ðŸª± ðŸ¦  ðŸ„ ðŸ„â€ðŸŸ« ðŸ’ ðŸ’® ðŸµï¸ ðŸŒ¼ ðŸŒ» ðŸŒ¹ ðŸ¥€ ðŸŒº ðŸŒ· ðŸŒ¸ ðŸª· ðŸª» ðŸŒ± ðŸª´ ðŸ•ï¸ ðŸŒ² ðŸŒ³ ðŸŒ° ðŸŒ´ ðŸŒµ ðŸŽ‹ ðŸŽ ðŸŒ¾ ðŸŒ¿ â˜˜ï¸ ðŸ€ ðŸ ðŸ‚ ðŸƒ ðŸŒï¸ ðŸŒŽï¸ ðŸŒï¸ ðŸŒ‘ ðŸŒ’ ðŸŒ“ ðŸŒ” ðŸŒ•ï¸ ðŸŒ– ðŸŒ— ðŸŒ˜ ðŸŒ™ ðŸŒš ðŸŒ› ðŸŒœï¸ â˜€ï¸ ðŸŒ ðŸŒž ðŸª ðŸ’« â­ï¸ ðŸŒŸ âœ¨ ðŸŒ  â˜„ï¸ ðŸŒŒ â˜ï¸ â›…ï¸ â›ˆï¸ ðŸŒ¤ï¸ ðŸŒ¥ï¸ ðŸŒ¦ï¸ ðŸŒ§ï¸ ðŸŒ¨ï¸ ðŸŒ©ï¸ ðŸŒªï¸ ðŸŒ«ï¸ ðŸŒ¬ï¸ ðŸŒ€ ðŸŒˆ ðŸŒ‚ â˜‚ï¸ â˜”ï¸ â›±ï¸ âš¡ï¸ â„ï¸ â˜ƒï¸ â›„ï¸ ðŸ”ï¸ â›°ï¸ ðŸ—» ðŸŒ‹ ðŸ”¥ ðŸ’§ ðŸŒŠ ðŸ’¥ ðŸ’¦ ðŸ’¨ðŸ‡ ðŸˆ ðŸ‰ ðŸŠ ðŸ‹ ðŸ‹â€ðŸŸ© ðŸŒ ðŸ ðŸ¥­ ðŸŽ ðŸ ðŸ ðŸ‘ ðŸ’ ðŸ“ ðŸ« ðŸ¥ ðŸ… ðŸ«’ ðŸ¥¥ ðŸ¥‘ ðŸ† ðŸ¥” ðŸ¥• ðŸŒ½ ðŸŒ¶ï¸ ðŸ«‘ ðŸ¥’ ðŸ¥¬ ðŸ¥¦ ðŸ«› ðŸ§„ ðŸ§… ðŸ«š ðŸ„ ðŸ„â€ðŸŸ« ðŸ«˜ ðŸ¥œ ðŸŒ° ðŸž ðŸ¥ ðŸ¥– ðŸ«“ ðŸ¥¨ ðŸ¥¯ ðŸ¥ž ðŸ§‡ ðŸ§€ ðŸ– ðŸ— ðŸ¥© ðŸ¥“ ðŸ” ðŸŸ ðŸ• ðŸŒ­ ðŸ¥ª ðŸŒ® ðŸŒ¯ ðŸ«” ðŸ¥™ ðŸ§† ðŸ¥š ðŸ³ ðŸ¥˜ ðŸ² ðŸ«• ðŸ¥£ ðŸ¥— ðŸ¿ ðŸ§ˆ ðŸ§‚ ðŸ¥« ðŸ± ðŸ˜ ðŸ™ ðŸš ðŸ› ðŸœ ðŸ ðŸ  ðŸ¢ ðŸ£ ðŸ¤ ðŸ¥ ðŸ¥® ðŸ¡ ðŸ¥Ÿ ðŸ¥  ðŸ¥¡ ðŸ¦ ðŸ§ ðŸ¨ ðŸ© ðŸª ðŸŽ‚ ðŸ° ðŸ§ ðŸ¥§ ðŸ« ðŸ¬ ðŸ­ ðŸ® ðŸ¯ ðŸ¼ ðŸ¥› ðŸ«— â˜•ï¸ ðŸ«– ðŸµ ðŸ¶ ðŸ¾ ðŸ· ðŸ¸ï¸ ðŸ¹ ðŸº ðŸ» ðŸ¥‚ ðŸ¥ƒ ðŸ¥¤ ðŸ§‹ ðŸ§ƒ ðŸ§‰ ðŸ§Š ðŸ¥¢ ðŸ½ï¸ ðŸ´ ðŸ¥„ ðŸ”ªâš½ï¸ âš¾ï¸ ðŸ¥Ž ðŸ€ ðŸ ðŸˆ ðŸ‰ ðŸŽ¾ ðŸ¥ ðŸŽ³ ðŸ ðŸ‘ ðŸ’ ðŸ¥ ðŸ“ ðŸ¸ ðŸ¥Š ðŸ¥‹ ðŸ¥… â›³ï¸ â›¸ï¸ ðŸŽ£ ðŸ¤¿ ðŸŽ½ ðŸŽ¿ ðŸ›· ðŸ¥Œ ðŸŽ¯ ðŸª€ ðŸª ðŸŽ± ðŸŽ–ï¸ ðŸ†ï¸ ðŸ… ðŸ¥‡ ðŸ¥ˆ ðŸ¥‰ðŸ”ï¸ â›°ï¸ ðŸŒ‹ ðŸ—» ðŸ•ï¸ ðŸ–ï¸ ðŸœï¸ ðŸï¸ ðŸŸï¸ ðŸ›ï¸ ðŸ—ï¸ ðŸ§± ðŸª¨ ðŸªµ ðŸ›– ðŸ˜ï¸ ðŸšï¸ ðŸ ï¸ ðŸ¡ ðŸ¢ ðŸ£ ðŸ¤ ðŸ¥ ðŸ¦ ðŸ¨ ðŸ© ðŸª ðŸ« ðŸ¬ ðŸ­ï¸ ðŸ¯ ðŸ° ðŸ’’ ðŸ—¼ ðŸ—½ â›ªï¸ ðŸ•Œ ðŸ›• ðŸ• â›©ï¸ ðŸ•‹ â›²ï¸ â›ºï¸ ðŸŒ ðŸŒƒ ðŸ™ï¸ ðŸŒ„ ðŸŒ… ðŸŒ† ðŸŒ‡ ðŸŒ‰ ðŸ—¾ ðŸžï¸ ðŸŽ  ðŸŽ¡ ðŸŽ¢ ðŸ’ˆ ðŸŽª ðŸš‚ ðŸšƒ ðŸš„ ðŸš… ðŸš† ðŸš‡ï¸ ðŸšˆ ðŸš‰ ðŸšŠ ðŸš ðŸšž ðŸš‹ ðŸšŒ ðŸšï¸ ðŸšŽ ðŸš ðŸš‘ï¸ ðŸš’ ðŸš“ ðŸš”ï¸ ðŸš• ðŸš– ðŸš— ðŸš˜ï¸ ðŸš™ ðŸ›» ðŸšš ðŸš› ðŸšœ ðŸŽï¸ ðŸï¸ ðŸ›µ ðŸ¦½ ðŸ¦¼ ðŸ›º ðŸš²ï¸ ðŸ›´ ðŸ›¹ ðŸ›¼ ðŸš ðŸ›£ï¸ ðŸ›¤ï¸ ðŸ›¢ï¸ â›½ï¸ ðŸš¨ ðŸš¥ ðŸš¦ ðŸ›‘ ðŸš§ âš“ï¸ â›µï¸ ðŸ›¶ ðŸš¤ ðŸ›³ï¸ â›´ï¸ ðŸ›¥ï¸ ðŸš¢ âœˆï¸ ðŸ›©ï¸ ðŸ›« ðŸ›¬ ðŸª‚ ðŸ’º ðŸš ðŸšŸ ðŸš  ðŸš¡ ðŸ›°ï¸ ðŸš€ ðŸ›¸ ðŸŽ† ðŸŽ‡ ðŸŽ‘ ðŸ—¿ðŸ›Žï¸ ðŸ§³ âŒ›ï¸ â³ï¸ âŒšï¸ â° â±ï¸ â²ï¸ ðŸ•°ï¸ ðŸŒ¡ï¸ ðŸ—ºï¸ ðŸ§­ ðŸŽƒ ðŸŽ„ ðŸ§¨ ðŸŽˆ ðŸŽ‰ ðŸŽŠ ðŸŽŽ ðŸª­ ðŸŽ ðŸŽ ðŸŽ€ ðŸŽ ðŸŽ—ï¸ ðŸŽŸï¸ ðŸŽ« ðŸ”® ðŸª„ ðŸ§¿ ðŸŽ®ï¸ ðŸ•¹ï¸ ðŸŽ° ðŸŽ² â™Ÿï¸ ðŸ§© ðŸ§¸ ðŸª… ðŸª† ðŸ–¼ï¸ ðŸŽ¨ ðŸ§µ ðŸª¡ ðŸ§¶ ðŸª¢ ðŸ‘“ï¸ ðŸ•¶ï¸ ðŸ¥½ ðŸ¥¼ ðŸ¦º ðŸ‘” ðŸ‘• ðŸ‘– ðŸ§£ ðŸ§¤ ðŸ§¥ ðŸ§¦ ðŸ‘— ðŸ‘˜ ðŸ¥» ðŸ©± ðŸ©² ðŸ©³ ðŸ‘™ ðŸ‘š ðŸ‘› ðŸ‘œ ðŸ‘ ðŸ›ï¸ ðŸŽ’ ðŸ©´ ðŸ‘ž ðŸ‘Ÿ ðŸ¥¾ ðŸ¥¿ ðŸ‘  ðŸ‘¡ ðŸ©° ðŸ‘¢ ðŸ‘‘ ðŸ‘’ ðŸŽ© ðŸŽ“ï¸ ðŸ§¢ ðŸª– â›‘ï¸ ðŸ“¿ ðŸ’„ ðŸ’ ðŸ’Ž ðŸ“¢ ðŸ“£ ðŸ“¯ ðŸŽ™ï¸ ðŸŽšï¸ ðŸŽ›ï¸ ðŸŽ¤ ðŸŽ§ï¸ ðŸ“»ï¸ ðŸŽ· ðŸª— ðŸŽ¸ ðŸŽ¹ ðŸŽº ðŸŽ» ðŸª• ðŸªˆ ðŸª‡ ðŸ¥ ðŸª˜ ðŸª© ðŸ“± ðŸ“² â˜Žï¸ ðŸ“ž ðŸ“Ÿï¸ ðŸ“  ðŸ”‹ ðŸª« ðŸ”Œ ðŸ’»ï¸ ðŸ–¥ï¸ ðŸ–¨ï¸ âŒ¨ï¸ ðŸ–±ï¸ ðŸ–²ï¸ ðŸ’½ ðŸ’¾ ðŸ’¿ï¸ ðŸ“€ ðŸ§® ðŸŽ¥ ðŸŽžï¸ ðŸ“½ï¸ ðŸŽ¬ï¸ ðŸ“ºï¸ ðŸ“·ï¸ ðŸ“¸ ðŸ“¹ï¸ ðŸ“¼ ðŸ”ï¸ ðŸ”Ž ðŸ•¯ï¸ ðŸ’¡ ðŸ”¦ ðŸ® ðŸª” ðŸ“” ðŸ“• ðŸ“– ðŸ“— ðŸ“˜ ðŸ“™ ðŸ“šï¸ ðŸ““ ðŸ“’ ðŸ“ƒ ðŸ“œ ðŸ“„ ðŸ“° ðŸ—žï¸ ðŸ“‘ ðŸ”– ðŸ·ï¸ ðŸ’°ï¸ ðŸª™ ðŸ’´ ðŸ’µ ðŸ’¶ ðŸ’· ðŸ’¸ ðŸ’³ï¸ ðŸªª ðŸ§¾ âœ‰ï¸ ðŸ’Œ ðŸ“§ ðŸ§§ ðŸ“¨ ðŸ“© ðŸ“¤ï¸ ðŸ“¥ï¸ ðŸ“¦ï¸ ðŸ“«ï¸ ðŸ“ªï¸ ðŸ“¬ï¸ ðŸ“­ï¸ ðŸ“® ðŸ—³ï¸ âœï¸ âœ’ï¸ ðŸ–‹ï¸ ðŸ–Šï¸ ðŸ–Œï¸ ðŸ–ï¸ ðŸ“ ðŸ’¼ ðŸ“ ðŸ“‚ ðŸ—‚ï¸ ðŸ“… ðŸ“† ðŸ—’ï¸ ðŸ—“ï¸ ðŸ“‡ ðŸ“ˆ ðŸ“‰ ðŸ“Š ðŸ“‹ï¸ ðŸ“Œ ðŸ“ ðŸ“Ž ðŸ–‡ï¸ ðŸ“ ðŸ“ âœ‚ï¸ ðŸ—ƒï¸ ðŸ—„ï¸ ðŸ—‘ï¸ ðŸ”’ï¸ ðŸ”“ï¸ ðŸ” ðŸ” ðŸ”‘ ðŸ—ï¸ ðŸ”¨ ðŸª“ â›ï¸ âš’ï¸ ðŸ› ï¸ ðŸ—¡ï¸ âš”ï¸ ðŸ’£ï¸ ðŸ”« ðŸªƒ ðŸ¹ ðŸ›¡ï¸ ðŸªš ðŸ”§ ðŸª› ðŸ”© âš™ï¸ ðŸ—œï¸ âš–ï¸ ðŸ¦¯ ðŸ”— â›“ï¸â€ðŸ’¥ â›“ï¸ ðŸª ðŸ§° ðŸ§² ðŸªœ ðŸ› ðŸ›ž ðŸ«™ âš—ï¸ ðŸ§ª ðŸ§« ðŸ§¬ ðŸ”¬ ðŸ”­ ðŸ“¡ ðŸ©» ðŸ’‰ ðŸ©¸ ðŸ’Š ðŸ©¹ ðŸ©º ðŸ©¼ ðŸšª ðŸ›— ðŸªž ðŸªŸ ðŸ›ï¸ ðŸ›‹ï¸ ðŸª‘ ðŸª¤ ðŸš½ ðŸª  ðŸš¿ ðŸ› ðŸ§¼ ðŸ«§ ðŸª’ ðŸª® ðŸ§´ ðŸ§· ðŸ§¹ ðŸ§º ðŸ§» ðŸª£ ðŸª¥ ðŸ§½ ðŸ§¯ ðŸ›Ÿ ðŸ›’ ðŸš¬ âš°ï¸ ðŸª¦ âš±ï¸ ðŸº ðŸª§ ðŸ•³ï¸ðŸ’˜ ðŸ’ ðŸ’– ðŸ’— ðŸ’“ ðŸ’ž ðŸ’• ðŸ’Ÿ â£ï¸ ðŸ’” â¤ï¸ ðŸ§¡ ðŸ’› ðŸ’š ðŸ©µ ðŸ’™ ðŸ’œ ðŸ©· ðŸ¤Ž ðŸ–¤ ðŸ©¶ ðŸ¤ â¤ï¸â€ðŸ”¥ â¤ï¸â€ðŸ©¹ ðŸ’¯ â™¨ï¸ ðŸ’¢ ðŸ’¬ ðŸ‘ï¸â€ðŸ—¨ï¸ ðŸ—¨ï¸ ðŸ—¯ï¸ ðŸ’­ ðŸ’¤ ðŸŒ â™ ï¸ â™¥ï¸ â™¦ï¸ â™£ï¸ ðŸƒ ðŸ€„ï¸ ðŸŽ´ ðŸŽ­ï¸ ðŸ”‡ ðŸ”ˆï¸ ðŸ”‰ ðŸ”Š ðŸ”” ðŸ”• ðŸŽ¼ ðŸŽµ ðŸŽ¶ ðŸ’¹ ðŸ§ ðŸš® ðŸš° â™¿ï¸ ðŸš¹ï¸ ðŸšºï¸ ðŸš» ðŸš¼ï¸ ðŸ§‘â€ðŸ§‘â€ðŸ§’ ðŸ§‘â€ðŸ§‘â€ðŸ§’â€ðŸ§’ ðŸ§‘â€ðŸ§’ ðŸ§‘â€ðŸ§’â€ðŸ§’ ðŸš¾ ðŸ›‚ ðŸ›ƒ ðŸ›„ ðŸ›… ðŸ›œ â›“ï¸â€ðŸ’¥ âš ï¸ ðŸš¸ â›”ï¸ ðŸš« ðŸš³ ðŸš­ï¸ ðŸš¯ ðŸš± ðŸš· ðŸ“µ ðŸ”ž â˜¢ï¸ â˜£ï¸ â¬†ï¸ â†—ï¸ âž¡ï¸ â†˜ï¸ â¬‡ï¸ â†™ï¸ â¬…ï¸ â†–ï¸ â†•ï¸ â†”ï¸ â†©ï¸ â†ªï¸ â¤´ï¸ â¤µï¸ ðŸ”ƒ ðŸ”„ ðŸ”™ ðŸ”š ðŸ”› ðŸ”œ ðŸ” ðŸ› âš›ï¸ ðŸ•‰ï¸ âœ¡ï¸ â˜¸ï¸ ðŸª¯ â˜¯ï¸ âœï¸ â˜¦ï¸ â˜ªï¸ â˜®ï¸ ðŸ•Ž ðŸ”¯ ðŸª¬ â™ˆï¸ â™‰ï¸ â™Šï¸ â™‹ï¸ â™Œï¸ â™ï¸ â™Žï¸ â™ï¸ â™ï¸ â™‘ï¸ â™’ï¸ â™“ï¸ â›Ž ðŸ”€ ðŸ” ðŸ”‚ â–¶ï¸ â©ï¸ â­ï¸ â¯ï¸ â—€ï¸ âªï¸ â®ï¸ ðŸ”¼ â« ðŸ”½ â¬ â¸ï¸ â¹ï¸ âºï¸ âï¸ ðŸŽ¦ ðŸ”… ðŸ”† ðŸ“¶ ðŸ“³ ðŸ“´ â™€ï¸ â™‚ï¸ âš§ âœ–ï¸ âž• âž– âž— ðŸŸ° â™¾ï¸ â€¼ï¸ â‰ï¸ â“ï¸ â” â• â—ï¸ ã€°ï¸ ðŸ’± ðŸ’² âš•ï¸ â™»ï¸ âšœï¸ ðŸ”± ðŸ“› ðŸ”° â­•ï¸ âœ… â˜‘ï¸ âœ”ï¸ âŒ âŽ âž° âž¿ ã€½ï¸ âœ³ï¸ âœ´ï¸ â‡ï¸ Â©ï¸ Â®ï¸ â„¢ï¸ #ï¸âƒ£ *ï¸âƒ£ 0ï¸âƒ£ 1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£ 4ï¸âƒ£ 5ï¸âƒ£ 6ï¸âƒ£ 7ï¸âƒ£ 8ï¸âƒ£ 9ï¸âƒ£ ðŸ”Ÿ ðŸ”  ðŸ”¡ ðŸ”¢ ðŸ”£ ðŸ”¤ ðŸ…°ï¸ ðŸ†Ž ðŸ…±ï¸ ðŸ†‘ ðŸ†’ ðŸ†“ â„¹ï¸ ðŸ†” â“‚ï¸ ðŸ†• ðŸ†– ðŸ…¾ï¸ ðŸ†— ðŸ…¿ï¸ ðŸ†˜ ðŸ†™ ðŸ†š ðŸˆ ðŸˆ‚ï¸ ðŸˆ·ï¸ ðŸˆ¶ ðŸˆ¯ï¸ ðŸ‰ ðŸˆ¹ ðŸˆšï¸ ðŸˆ² ðŸ‰‘ ðŸˆ¸ ðŸˆ´ ðŸˆ³ ãŠ—ï¸ ãŠ™ï¸ ðŸˆº ðŸˆµ ðŸ”´ ðŸŸ  ðŸŸ¡ ðŸŸ¢ ðŸ”µ ðŸŸ£ ðŸŸ¤ âš«ï¸ âšªï¸ ðŸŸ¥ ðŸŸ§ ðŸŸ¨ ðŸŸ© ðŸŸ¦ ðŸŸª ðŸŸ« â¬›ï¸ â¬œï¸ â—¼ï¸ â—»ï¸ â—¾ï¸ â—½ï¸ â–ªï¸ â–«ï¸ ðŸ”¶ ðŸ”· ðŸ”¸ ðŸ”¹ ðŸ”º ðŸ”» ðŸ’  ðŸ”˜ ðŸ”³ ðŸ”² ðŸ•›ï¸ ðŸ•§ï¸ ðŸ•ï¸ ðŸ•œï¸ ðŸ•‘ï¸ ðŸ•ï¸ ðŸ•’ï¸ ðŸ•žï¸ ðŸ•“ï¸ ðŸ•Ÿï¸ ðŸ•”ï¸ ðŸ• ï¸ ðŸ••ï¸ ðŸ•¡ï¸ ðŸ•–ï¸ ðŸ•¢ï¸ ðŸ•—ï¸ ðŸ•£ï¸ ðŸ•˜ï¸ ðŸ•¤ï¸ ðŸ•™ï¸ ðŸ•¥ï¸ ðŸ•šï¸ ðŸ•¦ï¸ðŸ ðŸš© ðŸŽŒ ðŸ´ ðŸ³ï¸ ðŸ³ï¸â€ðŸŒˆ ðŸ³ï¸â€âš§ï¸ ðŸ´â€â˜ ï¸ðŸ‘‹ðŸ» ðŸ¤šðŸ» ðŸ–ðŸ» âœ‹ðŸ» ðŸ––ðŸ» ðŸ‘ŒðŸ» ðŸ¤ŒðŸ» ðŸ¤ðŸ» âœŒðŸ» ðŸ¤žðŸ» ðŸ¤ŸðŸ» ðŸ¤˜ðŸ» ðŸ¤™ðŸ» ðŸ‘ˆðŸ» ðŸ‘‰ðŸ» ðŸ‘†ðŸ» ðŸ–•ðŸ» ðŸ‘‡ðŸ» â˜ðŸ» ðŸ«µðŸ» ðŸ‘ðŸ» ðŸ‘ŽðŸ» âœŠðŸ» ðŸ‘ŠðŸ» ðŸ¤›ðŸ» ðŸ¤œðŸ» ðŸ‘ðŸ» ðŸ™ŒðŸ» ðŸ‘ðŸ» ðŸ¤²ðŸ» ðŸ«±ðŸ» ðŸ«²ðŸ» ðŸ¤ðŸ» ðŸ«³ðŸ» ðŸ«´ðŸ» ðŸ«¸ðŸ» ðŸ«·ðŸ» ðŸ™ðŸ» ðŸ«°ðŸ» ðŸ«¶ðŸ» âœðŸ» ðŸ’…ðŸ» ðŸ¤³ðŸ» ðŸ’ªðŸ» ðŸ¦µðŸ» ðŸ¦¶ðŸ» ðŸ‘‚ðŸ» ðŸ¦»ðŸ» ðŸ‘ƒðŸ» ðŸ‘¶ðŸ» ðŸ§’ðŸ» ðŸ‘¦ðŸ» ðŸ‘§ðŸ» ðŸ§‘ðŸ» ðŸ‘±ðŸ» ðŸ‘¨ðŸ» ðŸ§”ðŸ» ðŸ§”ðŸ»â€â™€ï¸ ðŸ§”ðŸ»â€â™‚ï¸ ðŸ‘¨ðŸ»â€ðŸ¦° ðŸ‘¨ðŸ»â€ðŸ¦± ðŸ‘¨ðŸ»â€ðŸ¦³ ðŸ‘¨ðŸ»â€ðŸ¦² ðŸ‘©ðŸ» ðŸ‘©ðŸ»â€ðŸ¦° ðŸ§‘ðŸ»â€ðŸ¦° ðŸ‘©ðŸ»â€ðŸ¦± ðŸ§‘ðŸ»â€ðŸ¦± ðŸ‘©ðŸ»â€ðŸ¦³ ðŸ§‘ðŸ»â€ðŸ¦³ ðŸ‘©ðŸ»â€ðŸ¦² ðŸ§‘ðŸ»â€ðŸ¦² ðŸ‘±ðŸ»â€â™€ï¸ ðŸ‘±ðŸ»â€â™‚ï¸ ðŸ§“ðŸ» ðŸ‘´ðŸ» ðŸ‘µðŸ» ðŸ™ðŸ» ðŸ™ðŸ»â€â™‚ï¸ ðŸ™ðŸ»â€â™€ï¸ ðŸ™ŽðŸ» ðŸ™ŽðŸ»â€â™‚ï¸ ðŸ™ŽðŸ»â€â™€ï¸ ðŸ™…ðŸ» ðŸ™…ðŸ»â€â™‚ï¸ ðŸ™…ðŸ»â€â™€ï¸ ðŸ™†ðŸ» ðŸ™†ðŸ»â€â™‚ï¸ ðŸ™†ðŸ»â€â™€ï¸ ðŸ’ðŸ» ðŸ’ðŸ»â€â™‚ï¸ ðŸ’ðŸ»â€â™€ï¸ ðŸ™‹ðŸ» ðŸ™‹ðŸ»â€â™‚ï¸ ðŸ™‹ðŸ»â€â™€ï¸ ðŸ§ðŸ» ðŸ§ðŸ»â€â™‚ï¸ ðŸ§ðŸ»â€â™€ï¸ ðŸ™‡ðŸ» ðŸ™‡ðŸ»â€â™‚ï¸ ðŸ™‡ðŸ»â€â™€ï¸ ðŸ¤¦ðŸ» ðŸ¤¦ðŸ»â€â™‚ï¸ ðŸ¤¦ðŸ»â€â™€ï¸ ðŸ¤·ðŸ» ðŸ¤·ðŸ»â€â™‚ï¸ ðŸ¤·ðŸ»â€â™€ï¸ ðŸ§‘ðŸ»â€âš•ï¸ ðŸ‘¨ðŸ»â€âš•ï¸ ðŸ‘©ðŸ»â€âš•ï¸ ðŸ§‘ðŸ»â€ðŸŽ“ ðŸ‘¨ðŸ»â€ðŸŽ“ ðŸ‘©ðŸ»â€ðŸŽ“ ðŸ§‘ðŸ»â€ðŸ« ðŸ‘¨ðŸ»â€ðŸ« ðŸ‘©ðŸ»â€ðŸ« ðŸ§‘ðŸ»â€âš–ï¸ ðŸ‘¨ðŸ»â€âš–ï¸ ðŸ‘©ðŸ»â€âš–ï¸ ðŸ§‘ðŸ»â€ðŸŒ¾ ðŸ‘¨ðŸ»â€ðŸŒ¾ ðŸ‘©ðŸ»â€ðŸŒ¾ ðŸ§‘ðŸ»â€ðŸ³ ðŸ‘¨ðŸ»â€ðŸ³ ðŸ‘©ðŸ»â€ðŸ³ ðŸ§‘ðŸ»â€ðŸ”§ ðŸ‘¨ðŸ»â€ðŸ”§ ðŸ‘©ðŸ»â€ðŸ”§ ðŸ§‘ðŸ»â€ðŸ­ ðŸ‘¨ðŸ»â€ðŸ­ ðŸ‘©ðŸ»â€ðŸ­ ðŸ§‘ðŸ»â€ðŸ’¼ ðŸ‘¨ðŸ»â€ðŸ’¼ ðŸ‘©ðŸ»â€ðŸ’¼ ðŸ§‘ðŸ»â€ðŸ”¬ ðŸ‘¨ðŸ»â€ðŸ”¬ ðŸ‘©ðŸ»â€ðŸ”¬ ðŸ§‘ðŸ»â€ðŸ’» ðŸ‘¨ðŸ»â€ðŸ’» ðŸ‘©ðŸ»â€ðŸ’» ðŸ§‘ðŸ»â€ðŸŽ¤ ðŸ‘¨ðŸ»â€ðŸŽ¤ ðŸ‘©ðŸ»â€ðŸŽ¤ ðŸ§‘ðŸ»â€ðŸŽ¨ ðŸ‘¨ðŸ»â€ðŸŽ¨ ðŸ‘©ðŸ»â€ðŸŽ¨ ðŸ§‘ðŸ»â€âœˆï¸ ðŸ‘¨ðŸ»â€âœˆï¸ ðŸ‘©ðŸ»â€âœˆï¸ ðŸ§‘ðŸ»â€ðŸš€ ðŸ‘¨ðŸ»â€ðŸš€ ðŸ‘©ðŸ»â€ðŸš€ ðŸ§‘ðŸ»â€ðŸš’ ðŸ‘¨ðŸ»â€ðŸš’ ðŸ‘©ðŸ»â€ðŸš’ ðŸ‘®ðŸ» ðŸ‘®ðŸ»â€â™‚ï¸ ðŸ‘®ðŸ»â€â™€ï¸ ðŸ•µðŸ» ðŸ•µðŸ»â€â™‚ï¸ ðŸ•µðŸ»â€â™€ï¸ ðŸ’‚ðŸ» ðŸ’‚ðŸ»â€â™‚ï¸ ðŸ’‚ðŸ»â€â™€ï¸ ðŸ¥·ðŸ» ðŸ‘·ðŸ» ðŸ‘·ðŸ»â€â™‚ï¸ ðŸ‘·ðŸ»â€â™€ï¸ ðŸ«…ðŸ» ðŸ¤´ðŸ» ðŸ‘¸ðŸ» ðŸ‘³ðŸ» ðŸ‘³ðŸ»â€â™‚ï¸ ðŸ‘³ðŸ»â€â™€ï¸ ðŸ‘²ðŸ» ðŸ§•ðŸ» ðŸ¤µðŸ» ðŸ¤µðŸ»â€â™‚ï¸ ðŸ¤µðŸ»â€â™€ï¸ ðŸ‘°ðŸ» ðŸ‘°ðŸ»â€â™‚ï¸ ðŸ‘°ðŸ»â€â™€ï¸ ðŸ«„ðŸ» ðŸ«ƒðŸ» ðŸ¤°ðŸ» ðŸ§‘ðŸ»â€ðŸ¼ ðŸ‘¨ðŸ»â€ðŸ¼ ðŸ‘©ðŸ»â€ðŸ¼ ðŸ¤±ðŸ» ðŸ‘¼ðŸ» ðŸŽ…ðŸ» ðŸ¤¶ðŸ» ðŸ§‘ðŸ»â€ðŸŽ„ ðŸ¦¸ðŸ» ðŸ¦¸ðŸ»â€â™‚ï¸ ðŸ¦¸ðŸ»â€â™€ï¸ ðŸ¦¹ðŸ» ðŸ¦¹ðŸ»â€â™‚ï¸ ðŸ¦¹ðŸ»â€â™€ï¸ ðŸ§™ðŸ» ðŸ§™ðŸ»â€â™‚ï¸ ðŸ§™ðŸ»â€â™€ï¸ ðŸ§šðŸ» ðŸ§šðŸ»â€â™‚ï¸ ðŸ§šðŸ»â€â™€ï¸ ðŸ§›ðŸ» ðŸ§›ðŸ»â€â™‚ï¸ ðŸ§›ðŸ»â€â™€ï¸ ðŸ§œðŸ» ðŸ§œðŸ»â€â™‚ï¸ ðŸ§œðŸ»â€â™€ï¸ ðŸ§ðŸ» ðŸ§ðŸ»â€â™‚ï¸ ðŸ§ðŸ»â€â™€ï¸ ðŸ’†ðŸ» ðŸ’†ðŸ»â€â™‚ï¸ ðŸ’†ðŸ»â€â™€ï¸ ðŸ’‡ðŸ» ðŸ’‡ðŸ»â€â™‚ï¸ ðŸ’‡ðŸ»â€â™€ï¸ ðŸš¶ðŸ» ðŸš¶ðŸ»â€â™‚ï¸ ðŸš¶ðŸ»â€â™€ï¸ ðŸ§ðŸ» ðŸ§ðŸ»â€â™‚ï¸ ðŸ§ðŸ»â€â™€ï¸ ðŸ§ŽðŸ» ðŸ§ŽðŸ»â€â™‚ï¸ ðŸ§ŽðŸ»â€â™€ï¸ ðŸ§‘ðŸ»â€ðŸ¦¯ ðŸ‘¨ðŸ»â€ðŸ¦¯ ðŸ‘©ðŸ»â€ðŸ¦¯ ðŸ§‘ðŸ»â€ðŸ¦¼ ðŸ‘¨ðŸ»â€ðŸ¦¼ ðŸ‘©ðŸ»â€ðŸ¦¼ ðŸ§‘ðŸ»â€ðŸ¦½ ðŸ‘¨ðŸ»â€ðŸ¦½ ðŸ‘©ðŸ»â€ðŸ¦½ ðŸƒðŸ» ðŸƒðŸ»â€â™‚ï¸ ðŸƒðŸ»â€â™€ï¸ ðŸš¶ðŸ»â€âž¡ï¸ ðŸš¶ðŸ»â€â™€ï¸â€âž¡ï¸ ðŸš¶ðŸ»â€â™‚ï¸â€âž¡ï¸ ðŸ§ŽðŸ»â€âž¡ï¸ ðŸ§ŽðŸ»â€â™€ï¸â€âž¡ï¸ ðŸ§ŽðŸ»â€â™‚ï¸â€âž¡ï¸ ðŸ§‘ðŸ»â€ðŸ¦¯â€âž¡ï¸ ðŸ‘¨ðŸ»â€ðŸ¦¯â€âž¡ï¸ ðŸ‘©ðŸ»â€ðŸ¦¯â€âž¡ï¸ ðŸ§‘ðŸ»â€ðŸ¦¼â€âž¡ï¸ ðŸ‘¨ðŸ»â€ðŸ¦¼â€âž¡ï¸ ðŸ‘©ðŸ»â€ðŸ¦¼â€âž¡ï¸ ðŸ§‘ðŸ»â€ðŸ¦½â€âž¡ï¸ ðŸ‘¨ðŸ»â€ðŸ¦½â€âž¡ï¸ ðŸ‘©ðŸ»â€ðŸ¦½â€âž¡ï¸ ðŸƒðŸ»â€âž¡ï¸ ðŸƒðŸ»â€â™€ï¸â€âž¡ï¸ ðŸƒðŸ»â€â™‚ï¸â€âž¡ï¸ ðŸ’ƒðŸ» ðŸ•ºðŸ» ðŸ•´ðŸ» ðŸ§–ðŸ» ðŸ§–ðŸ»â€â™‚ï¸ ðŸ§–ðŸ»â€â™€ï¸ ðŸ§—ðŸ» ðŸ§—ðŸ»â€â™‚ï¸ ðŸ§—ðŸ»â€â™€ï¸ ðŸ‡ðŸ» ðŸ‚ðŸ» ðŸŒðŸ» ðŸŒðŸ»â€â™‚ï¸ ðŸŒðŸ»â€â™€ï¸ ðŸ„ðŸ» ðŸ„ðŸ»â€â™‚ï¸ ðŸ„ðŸ»â€â™€ï¸ ðŸš£ðŸ» ðŸš£ðŸ»â€â™‚ï¸ ðŸš£ðŸ»â€â™€ï¸ ðŸŠðŸ» ðŸŠðŸ»â€â™‚ï¸ ðŸŠðŸ»â€â™€ï¸ â›¹ðŸ» â›¹ðŸ»â€â™‚ï¸ â›¹ðŸ»â€â™€ï¸ ðŸ‹ðŸ» ðŸ‹ðŸ»â€â™‚ï¸ ðŸ‹ðŸ»â€â™€ï¸ ðŸš´ðŸ» ðŸš´ðŸ»â€â™‚ï¸ ðŸš´ðŸ»â€â™€ï¸ ðŸšµðŸ» ðŸšµðŸ»â€â™‚ï¸ ðŸšµðŸ»â€â™€ï¸ ðŸ¤¸ðŸ» ðŸ¤¸ðŸ»â€â™‚ï¸ ðŸ¤¸ðŸ»â€â™€ï¸ ðŸ¤½ðŸ» ðŸ¤½ðŸ»â€â™‚ï¸ ðŸ¤½ðŸ»â€â™€ï¸ ðŸ¤¾ðŸ» ðŸ¤¾ðŸ»â€â™‚ï¸ ðŸ¤¾ðŸ»â€â™€ï¸ ðŸ¤¹ðŸ» ðŸ¤¹ðŸ»â€â™‚ï¸ ðŸ¤¹ðŸ»â€â™€ï¸ ðŸ§˜ðŸ» ðŸ§˜ðŸ»â€â™‚ï¸ ðŸ§˜ðŸ»â€â™€ï¸ ðŸ›€ðŸ» ðŸ›ŒðŸ» ðŸ’‘ðŸ» ðŸ’ðŸ» ðŸ‘«ðŸ» ðŸ‘­ðŸ» ðŸ‘¬ðŸ»'
    );
    document.body.querySelectorAll('p, a').forEach((e) => {
      // Optimization: Avoid double innerText write to prevent unnecessary layout thrashing
      const base64 = btoa(
        String.fromCharCode(...new TextEncoder('utf-8').encode(e.innerText))
      );
      e.innerText = encoding(base64);
    });
    break;
  case 'noscript.css':
    document.body.innerText =
      'You are using the NoScript theme with Javascript enabled :)';
    break;
  case 'summarizer.css':
    summarizer();
    break;
}

if (!theme.endsWith('.css')) {
  document.body.innerText = 'Themes end in .css :)';
}

async function summarizerSupport() {
  if ('Summarizer' in self) {
    const a = await Summarizer.availability({languages: ['en']});
    if (a === 'downloadable' && !navigator.userActivation.isActive)
      return notSupported(
        'user activation needed for downloading Summarizer API data'
      );
    if (a == 'downloading' || a == 'downloadable' || a == 'available')
      return true;
    return notSupported('unusable Summarizer API');
  }
  return notSupported('no Summarizer API');
}

function AIWarning() {
  alert('AI content, might be misleading');
}

async function summarizer() {
  const supported = await summarizerSupport();
  // Dont run on the listing page since for security AI is not allowed to render HTML.
  if (
    !supported ||
    location.pathname === '/writeups/credits/' ||
    location.pathname === '/writeups/privacy/' ||
    location.pathname === '/writeups/'
  )
    return;

  const summarizer = await Summarizer.create(writeupsContext);
  const stream = summarizer.summarizeStreaming(content.innerText, {
    context: document.title
  });

  content.innerText = '';

  let buffer = '';
  let frameId = null;

  const updateDOM = () => {
    content.innerText += buffer;
    buffer = '';
    frameId = null;
  };

  for await (const chunk of stream) {
    buffer += chunk;
    if (!frameId) {
      frameId = requestAnimationFrame(updateDOM);
    }
  }

  if (frameId) {
    cancelAnimationFrame(frameId);
    updateDOM();
  } else if (buffer) {
    updateDOM();
  }
}

// Dont assume the user has javascript enabled and no clickjacking.
if (window.top === window && !searchParams.has('theme'))
  themes.disabled = false;
// Javascript enabled, not a mobile device.
if (location.pathname === '/writeups/' && !isMobile)
  info.innerText = 'You can go back here with the dot key.';

function base2base(srcAlphabet, dstAlphabet) {
  /* modification of github.com/HarasimowiczKamil/any-base to:
   * support multibyte
   * enforce unique alphabets
   */
  var noDifference = srcAlphabet === dstAlphabet,
    srcAlphabet = [...new Set([...srcAlphabet].join(''))],
    dstAlphabet = [...new Set([...dstAlphabet].join(''))],
    fromBase = BigInt(srcAlphabet.length),
    toBase = BigInt(dstAlphabet.length);

  // Optimization: Pre-compute lookup map for O(1) access
  var srcMap = {};
  for (var i = 0; i < srcAlphabet.length; i++) {
    srcMap[srcAlphabet[i]] = BigInt(i);
  }

  return (number) => {
    if (noDifference) return number;

    var val = 0n;
    for (var i = 0; i < number.length; i++) {
      var char = number[i];
      if (srcMap[char] === undefined) continue;
      val = val * fromBase + srcMap[char];
    }

    if (val === 0n) return dstAlphabet[0];

    var result = [];
    while (val > 0n) {
      var remainder = val % toBase;
      result.push(dstAlphabet[Number(remainder)]);
      val = val / toBase;
    }

    return result.reverse().join('');
  };
}
